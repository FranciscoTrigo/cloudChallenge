<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<body>
  <p>This page was created as part of the <a href="https://cloudresumechallenge.dev/"> Cloud Resume Challenge </a>.<br>
  It was generated with <a href="https://jsonresume.org/">JSON Resume</a>, and uses many AWS services such as S3, CloudFront, CodePipeline, DynamoDB, Lambda.<br>
  Changes automatically deployed using CodePipeline from <a href="https://github.com/FranciscoTrigo/cloudChallenge">this Github repository</a>.<br>
  </p>
    <div id="result"></div>
    <script>
        async function fetchIntegerFromAPI(apiUrl) {
          try {
            const response = await fetch(apiUrl);
            if (!response.ok) {
              throw new Error('Failed to fetch data from the API');
            }
            const data = await response.json();
            return data;
          } catch (error) {
            console.error('Error fetching data:', error);
            // You can handle the error as per your requirement
          }
        }
    
        window.onload = function() {
          const apiUrl = 'https://p0xwa3zuc0.execute-api.us-east-2.amazonaws.com/default/incrementResumeViews';
          fetchIntegerFromAPI(apiUrl)
            .then(integer => {
              // Update the content of the 'result' div with the fetched integer value
              document.getElementById('result').textContent = integer + ' persons have visited this resume!';
            })
            .catch(error => {
              console.error('Error:', error);
            });
        };
      </script>
    </body>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Francisco Trigomijes resume</title>
        <style type="text/css">
            body, html
            {
                margin: 0; padding: 0; height: 100%; overflow: hidden;
            }

            #content
            {
                position:absolute; left: 0; right: 0; bottom: 0; top: 130px; 
            }
        </style>
    </head>
    <body>
        <div id="content">
            <iframe width="100%" height="100%" frameborder="0" src="resume.html"></iframe>
        </div>
    </body>
</html>
